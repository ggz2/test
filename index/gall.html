<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>view+</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f0f0f0;
  }
  h1 {
    text-align: center;
    padding: 20px;
  }
  #gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    padding: 10px;
  }
  .thumbnail {
    width: 15%;
    height: 15%;
    object-fit: cover;
    cursor: pointer;
    border-radius: 8px;
    transition: transform 0.2s;
  }
  .thumbnail:hover {
    transform: scale(1.05);
  }
  #lightbox {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 9999;
    padding: 20px;
    box-sizing: border-box;
  }
  #mediaContainer {
    max-width: 90%;
    max-height: 80%;
    margin-bottom: 10px;
  }
  #lightbox img, #lightbox video {
    max-width: 100%;
    max-height: 100%;
    border-radius: 8px;
  }
  #originalLink {
    color: #fff;
    font-size: 1em;
    word-break: break-all;
  }
  #closeBtn {
    background-color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>enjoy</h1>
<div id="gallery"></div>

<div id="lightbox" onclick="closeLightbox()">
  <div id="mediaContainer"></div>
  <button id="closeBtn" onclick="closeLightbox()">Close</button>
  <div id="originalLink"></div>
</div>

<script>
const githubUser = 'gg2'; // your GitHub username
const githubRepo = 'info'; // your GitHub repo
const githubFolder = 'all'; // folder on GitHub
const githubApiUrl = `https://api.github.com/repos/${githubUser}/${githubRepo}/contents/${githubFolder}`;

// Replit media URL - replace with your actual URL
const replitMediaUrl = 'https://plushN.repl.co/test64/';

// Fetch from GitHub
fetch(githubApiUrl)
  .then(res => {
    if (!res.ok) throw new Error('GitHub API error');
    return res.json();
  })
  .then(files => {
    const mediaFiles = files.filter(file => /\.(png|jpg|jpeg|gif|mp4)$/i.test(file.name));
    displayMedia(mediaFiles);
  })
  .catch(console.error);

// Fetch from Replit (assuming static files served from here)
fetch(replitMediaUrl)
  .then(res => {
    if (!res.ok) throw new Error('Replit fetch error');
    return res.json();
  })
  .then(replitFiles => {
    // replitFiles should be an array of filenames (if your API returns such)
    // For static hosting, you'll need a JSON listing files, or hardcode filenames
    // For simplicity, let's assume you have a JSON with filenames:
    // e.g., replitFiles = ["video1.mp4", "image2.jpg"]
    // and the URLs are replitMediaUrl + filename
    // For demonstration, let's hardcode an array:
    const replitMediaFiles = replitFiles; // or use a predefined array
    displayReplitMedia(replitMediaFiles);
  })
  .catch(error => {
    // If your Replit host doesn't provide JSON list, you could hardcode filenames
    // or skip this
    console.log('Replit media fetch error or not implemented.');
  });

function displayMedia(files) {
  files.forEach(file => {
    const ext = file.name.split('.').pop().toLowerCase();
    const url = file.download_url;
    createThumbnail(url, ext, url);
  });
}

function displayReplitMedia(filenames) {
  filenames.forEach(filename => {
    const ext = filename.split('.').pop().toLowerCase();
    const url = replitMediaUrl + filename;
    createThumbnail(url, ext, url);
  });
}

function createThumbnail(url, ext, originalUrl) {
  const gallery = document.getElementById('gallery');
  const thumb = document.createElement('img');
  thumb.src = url;
  thumb.className = 'thumbnail';
  thumb.title = originalUrl;
  thumb.onclick = () => openLightbox(url, originalUrl, ext);
  gallery.appendChild(thumb);
}

function openLightbox(mediaUrl, originalUrl, ext) {
  const container = document.getElementById('mediaContainer');
  const linkDiv = document.getElementById('originalLink');
  container.innerHTML = '';
  linkDiv.innerHTML = '';

  if (ext === 'mp4') {
    const video = document.createElement('video');
    video.src = mediaUrl;
    video.controls = true;
    video.autoplay = true;
    container.appendChild(video);
  } else {
    const img = document.createElement('img');
    img.src = mediaUrl;
    container.appendChild(img);
  }

  // Link to original
  linkDiv.innerHTML = `<a href="${originalUrl}" target="_blank" style="color:#fff;text-decoration:underline;">View Original</a>`;
  document.getElementById('lightbox').style.display = 'flex';
}

function closeLightbox() {
  document.getElementById('lightbox').style.display = 'none';
}
</script>

</body>
</html>
