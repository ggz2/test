<script>
  // Replace hostname and port as needed
  const hostname = 'https://literate-dollop-x6rp4rjxpqw3vx4v.github.dev/'; // or your Codespaces URL
  const port = 6524; // your server port

  const wsUrl = `ws://${hostname}:${port}`;
  const wss = new WebSocket(wsUrl);

  let username = '';

  while (!username) {
    username = prompt('Enter your username:');
  }

  wss.onopen = () => {
    console.log('Connected to server');
  };

  wss.onmessage = (event) => {
    const msg = JSON.parse(event.data);
    const p = document.createElement('p');
    p.innerHTML = `<strong>${msg.user}:</strong> ${msg.text}`;
    document.getElementById('messages').appendChild(p);
    document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
  };

  document.getElementById('sendBtn').onclick = sendMessage;
  document.getElementById('messageInput').onkeydown = (e) => {
    if (e.key === 'Enter') sendMessage();
  };

  function sendMessage() {
    const input = document.getElementById('messageInput');
    const text = input.value.trim();
    if (!text) return;
    const msg = { user: username, text: text };
    wss.send(JSON.stringify(msg));
    input.value = '';
  }
</script>
