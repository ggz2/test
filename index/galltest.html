<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>view</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f0f0f0;
  }

  h1 {
    text-align: center;
    padding: 20px;
  }

  /* Gallery styles */
  #gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    padding: 10px;
  }

  /* Thumbnail images */
  .thumbnail {
    width: 15%;
    height: 15%;
    object-fit: cover;
    cursor: pointer;
    border-radius: 8px;
    transition: transform 0.2s;
  }

  .thumbnail:hover {
    transform: scale(1.05);
  }

  /* Lightbox overlay styles */
  #lightbox {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 9999;
    padding: 20px;
    box-sizing: border-box;
  }

  #mediaContainer {
    max-width: 90%;
    max-height: 80%;
    margin-bottom: 10px;
  }

  #lightbox img, #lightbox video {
    max-width: 100%;
    max-height: 100%;
    border-radius: 8px;
  }

  /* Link to original */
  #originalLink {
    color: #fff;
    font-size: 1em;
    word-break: break-all;
  }

  /* Close button */
  #closeBtn {
    background-color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>enjoy</h1>
<div id="gallery"></div>

<!-- Lightbox overlay -->
<div id="lightbox" onclick="closeLightbox()">
  <div id="mediaContainer"></div>
  <button id="closeBtn" onclick="closeLightbox()">Close</button>
  <div id="originalLink"></div>
</div>

<!-- Keep your existing HTML and CSS the same -->

<script>
  // List of repo URLs or raw file URLs to preload
  const mediaUrls = [
    // Add your direct URLs here, e.g.,
    'https://raw.githubusercontent.com/ggz2/info/main/all/',
'https://raw.githubusercontent.com/ggz2/info2/main/all/'
    // etc.
  ];

  const mediaData = []; // To store base64 data URLs and metadata

  // Function to convert image URL to base64
  function fetchAndConvertImage(url) {
    return fetch(url)
      .then(res => res.blob())
      .then(blob => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onloadend = () => resolve({ url, dataUrl: reader.result });
        reader.onerror = reject;
        reader.readAsDataURL(blob);
      }));
  }

  // For videos, embedding as data URL is possible but large; for demo, just store URLs
  function preloadMedia() {
    const promises = mediaUrls.map(url => {
      if (/\.(jpg|jpeg|png|gif)$/i.test(url)) {
        return fetchAndConvertImage(url).then(({ url, dataUrl }) => {
          mediaData.push({ type: 'image', dataUrl, originalUrl: url });
        });
      } else if (/\.mp4$/i.test(url)) {
        // For videos, you may choose to store URL directly or embed as data URL
        // Embedding videos as data URLs can be very large
        mediaData.push({ type: 'video', dataUrl: url, originalUrl: url });
        return Promise.resolve();
      }
    });
    return Promise.all(promises);
  }

  // After preloading, display thumbnails
  function displayThumbnails() {
    const gallery = document.getElementById('gallery');
    mediaData.forEach((media, index) => {
      const thumb = document.createElement('img');
      thumb.className = 'thumbnail';
      if (media.type === 'image') {
        thumb.src = media.dataUrl;
      } else if (media.type === 'video') {
        // Use a placeholder or thumbnail for videos
        thumb.src = 'https://via.placeholder.com/150?text=Video';
      }
      thumb.onclick = () => openLightbox(media);
      gallery.appendChild(thumb);
    });
  }

  function openLightbox(media) {
    const container = document.getElementById('mediaContainer');
    const linkDiv = document.getElementById('originalLink');
    container.innerHTML = '';
    linkDiv.innerHTML = '';

    if (media.type === 'video') {
      const video = document.createElement('video');
      video.src = media.dataUrl;
      video.controls = true;
      video.autoplay = true;
      container.appendChild(video);
    } else {
      const img = document.createElement('img');
      img.src = media.dataUrl;
      container.appendChild(img);
    }

    linkDiv.innerHTML = `<a href="${media.originalUrl}" target="_blank" style="color:#fff;text-decoration:underline;">View Original</a>`;
    document.getElementById('lightbox').style.display = 'flex';
  }

  function closeLightbox() {
    document.getElementById('lightbox').style.display = 'none';
  }

  // Initialize
  preloadMedia().then(() => {
    displayThumbnails();
  });
</script>
  
</body>
</html>
